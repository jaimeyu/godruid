  JsonApiDataCleaningProfileCreateRequest:
    type: "object"
    required: ["data"]
    properties:
      data:
        $ref: '#/definitions/DataCleaningProfileCreateRequest'

  DataCleaningProfileCreateRequest:
    type: "object"
    required: ["type", "attributes"]
    properties:
      type: 
        type: "string"
        enum: [dataCleaningProfiles]
        default: "dataCleaningProfiles"
      id:
        type: "string"
      attributes:
        $ref: '#/definitions/DataCleaningProfileCreateRequestAttr'

  DataCleaningProfileCreateRequestAttr:
    type: "object"
    required: ["rules"]
    properties:
      _rev:
        type: "string"
        description: "Value used to ensure updates to this object are handled in order."
      rules:
        type: "array"
        items: 
           $ref: '#/definitions/DataCleaningProfileRule'
        description: "List of all the rules to evaluate for Data Cleaning"

  JsonApiDataCleaningProfileUpdateRequest:
    type: "object"
    required: ["data"]
    properties:
      data:
        $ref: '#/definitions/DataCleaningProfileUpdateRequest'

  DataCleaningProfileUpdateRequest:
    type: "object"
    required: ["type", "id", "attributes"]
    properties:
      type: 
        type: "string"
        enum: [dataCleaningProfiles]
        default: "dataCleaningProfiles"
      id:
        type: "string"
      attributes:
        $ref: '#/definitions/DataCleaningProfileUpdateRequestAttr'

  DataCleaningProfileUpdateRequestAttr:
    type: "object"
    required: ["_rev", "rules"]
    properties:
      _rev:
        type: "string"
        description: "Value used to ensure updates to this object are handled in order."
      rules:
        type: "array"
        items: 
           $ref: '#/definitions/DataCleaningProfileRule'
        description: "List of all the rules to evaluate for Data Cleaning"

  DataCleaningProfileRule:
    type: "object"
    required: ["metricVendor","metricLabel","isEnabled","triggerCondition","clearCondition"]
    properties:
      metricVendor:
        type: "string"
        enum: [accedian-twamp,acedian-flowmeter]
        description: "The name of the vendor which provides the metric used in the rule."
      metricLabel:
        type: "string"
        description: "The name of the metric used in the rule."
      isEnabled: 
        type: "boolean"
        description: "Toggle to indicate whether or not the rule will be applied."
      triggerCondition:
        $ref: '#/definitions/DataCleaningCondition'
        description: "Object which determines when a rule will be triggered/applied"
      clearCondition:
        $ref: '#/definitions/DataCleaningCondition'
        description: "Object which determines when a rule will be cleared"

  DataCleaningCondition:
    type: "object"
    required: ["comparator", "value", "valueAggregate", "duration"]
    description: "A condition used to evalutate when a data cleaning rule should be triggered or cleared."
    properties:
      comparator:
        type: "string"
        enum: [gt,lt,gte,lte,eq]
        description: "Operand to use when evaluating the condition. [gt=greaterThan, lt=lessThan, gte=greaterThanOrEqual, lte=lessThanOrEqual, eq=equal]"
      value:
        type: "string"
        description: "The value against which the selected metric will be compared."
      valueAggregate:
        type: "string"
        enum: [min,max,avg]
        description: "The method of aggregation by which the selected metric will be aggregateds. [min=minimum, max=maximum, avg=average]"
      duration: 
        type: "string"
        description: "ISO-8601 interval over which this codition will be evaluated."

  JsonApiDataCleaningProfileResponse:
    type: "object"
    required: ["data"]
    properties:
      data:
        $ref: '#/definitions/DataCleaningProfileResponse'
  
  DataCleaningProfileResponse:
    type: "object"
    required: ["type", "id", "attributes"]
    properties:
      type: 
        type: "string"
        enum: [dataCleaningProfiles]
        default: "dataCleaningProfiles"
      id:
        type: "string"
      attributes:
        $ref: '#/definitions/DataCleaningProfileResponseAttr'

  DataCleaningProfileResponseAttr:
    type: "object"
    required: ["_rev", "rules", "createdTimestamp", "lastModifiedTimestamp"]
    properties:
      _rev:
        type: "string"
        description: "Value used to ensure updates to this object are handled in order."
      rules:
        type: "array"
        items: 
           $ref: '#/definitions/DataCleaningProfileRule'
        description: "List of all the rules to evaluate for Data Cleaning"
      createdTimestamp:
        type: "integer"
        format: "int64"
        description: "Time since epoch at which this object was instantiated."
      lastModifiedTimestamp:
        type: "integer"
        format: "int64"
        description: "Time since epoch at which this object was last altered."
