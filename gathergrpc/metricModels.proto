syntax = "proto3";

package gathergrpc;

message ThresholdCrossingResult {
  float total = 1;
  float minorPercent = 2;
  float minorRatio = 3;
  float minorThreshold = 4;
  float majorThreshold = 5;
  float criticalRatio = 6;
  float criticalThreshold = 7;
  float criticalPercent = 8;
  float majorPercent = 9;
  float majorRatio = 10;
}

message ThresholdCrossing {
  string timestamp = 1;
  ThresholdCrossingResult result = 2;
}

message ThresholdCrossingResponse {
   repeated ThresholdCrossing data = 1;
}

message ThresholdCrossingRequest {
  string thresholdProfileName = 1;
  string interval = 2; //ISO-8601 Intervals
  string tenant = 3;
  string domain = 4;
  string granularity = 5; //ISO-8601 period combination
  string objectType = 6;
  string direction = 7;
  string metric = 8;
}

message HistogramRequest {
  string interval = 1; //ISO-8601 Intervals
  string tenant = 2;
  string domain = 3;
  string granularity = 4; //ISO-8601 period combination
  string direction = 5;
  string metric = 6;
  int32 numBuckets = 7;
  int32 resolution = 8;
}

message HistogramBuckets {
  repeated float breaks = 1;
  repeated float counts = 2;
}

message HistogramResult {
  HistogramBuckets thresholdBuckets = 1;
}

message Histogram {
  string timestamp = 1;
  HistogramResult result = 2;
}

message HistogramResponse {
   repeated Histogram data = 1;
}